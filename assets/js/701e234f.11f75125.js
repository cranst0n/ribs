"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[475],{9828(e,n,t){t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>p,frontMatter:()=>d,metadata:()=>i,toc:()=>h});const i=JSON.parse('{"id":"core/validated","title":"Validated","description":"The Validated type, like Either represents the existence of one of two","source":"@site/docs/core/validated.mdx","sourceDirName":"core","slug":"/core/validated","permalink":"/ribs/docs/core/validated","draft":false,"unlisted":false,"editUrl":"https://github.com/cranst0n/ribs/edit/main/website/docs/core/validated.mdx","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"tutorialSidebar","previous":{"title":"Either","permalink":"/ribs/docs/core/either"},"next":{"title":"Collections","permalink":"/ribs/docs/core/collections"}}');var a=t(4848),s=t(8453),r=t(2045);const o="import 'package:ribs_core/ribs_core.dart';\n\n// create-user-1\n\n// Some type aliases for clarity\ntypedef Name = String;\ntypedef Alias = String;\ntypedef Age = int;\n\nfinal class User {\n  final Name name;\n  final Alias alias;\n  final Age age;\n\n  const User(this.name, this.alias, this.age);\n}\n\nEither<String, User> userEither(Name name, Alias alias, Age age) => throw UnimplementedError();\n\n// create-user-1\n\n// create-user-2\n\nValidatedNel<String, Name> validateName(Name name) =>\n    name.isEmpty ? 'No name provided!'.invalidNel() : name.validNel();\n\nValidatedNel<String, Alias> validateAlias(Alias alias) =>\n    alias.isEmpty ? 'No alias provided!'.invalidNel() : alias.validNel();\n\nValidatedNel<String, Age> validateAge(Age age) =>\n    age < 18 ? 'Too young!'.invalidNel() : age.validNel();\n\nValidatedNel<String, User> createUser(User user) => (\n  validateName(user.name),\n  validateAlias(user.alias),\n  validateAge(user.age),\n).mapN(User.new);\n\n// create-user-2\n\n// create-user-3\n\n// Valid(Instance of 'User')\nfinal good = createUser(const User('John', 'Doe', 30));\n\n// Invalid(NonEmptyIList(No name provided!))\nfinal noName = createUser(const User('', 'Doe', 30));\n\n// Invalid(NonEmptyIList(Too young!))\nfinal tooYoung = createUser(const User('John', 'Doe', 7));\n\n// Invalid(NonEmptyIList(No name provided!, Too young!))\nfinal noAliasAndTooYoung = createUser(const User('John', '', 10));\n\n// Invalid(NonEmptyIList(No name provided!, No alias provided!))\nfinal noNameNoAlias = createUser(const User('', '', 75));\n\n// create-user-3\n\n// create-user-4\n\nfinal succeeded = createUser(const User('John', 'Doe', 30));\nfinal failed = createUser(const User('', 'Doe', 3));\n\nvoid notifyUser(String message) => throw UnimplementedError();\nvoid storeUser(User user) => throw UnimplementedError();\n\nvoid handleCreateUser() {\n  succeeded.fold(\n    (errors) => notifyUser(errors.mkString(start: 'User creation failed: ', sep: ',')),\n    (user) => storeUser(user),\n  );\n}\n\n// create-user-4\n",d={sidebar_position:4},l="Validated",c={},h=[{value:"Motivation",id:"motivation",level:2}];function u(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",p:"p",strong:"strong",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"validated",children:"Validated"})}),"\n",(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.code,{children:"Validated"})," type, like ",(0,a.jsx)(n.code,{children:"Either"})," represents the existence of one of two\ntypes. An instance of ",(0,a.jsx)(n.code,{children:"Validated"})," is an instance of ",(0,a.jsx)(n.code,{children:"Valid"})," or ",(0,a.jsx)(n.code,{children:"Invalid"}),"."]}),"\n",(0,a.jsxs)(n.p,{children:["Additionaly ",(0,a.jsx)(n.code,{children:"ValidatedNel<E, A>"})," is an alias of type ",(0,a.jsx)(n.code,{children:"Validated<NonEmptyIList<E>, A>"}),"\nwhich describes either one or more errors (",(0,a.jsx)(n.code,{children:"NonEmptyIList<A>>"}),") or a successful\nvalue (",(0,a.jsx)(n.code,{children:"A"}),")."]}),"\n",(0,a.jsx)(n.admonition,{type:"info",children:(0,a.jsxs)(n.p,{children:["This introduces a new datastructure used in Ribs, ",(0,a.jsx)(n.code,{children:"NonEmptyIList"}),", which is a\nlist that contains at least one element. You can read more about it on the\n",(0,a.jsx)(n.a,{href:"/ribs/docs/core/collections#nonemptyilist",children:"NonEmptyIList page"}),", but for the purposes of\n",(0,a.jsx)(n.code,{children:"Validated"})," just understand it's a list with at least one element."]})}),"\n",(0,a.jsx)(n.h2,{id:"motivation",children:"Motivation"}),"\n",(0,a.jsxs)(n.p,{children:["Let's expand and improve on the example from ",(0,a.jsx)(n.code,{children:"Either"})," where we wanted to define\na function to create a new user from a set of inputs. Here's our domain model:"]}),"\n",(0,a.jsx)(r.z,{language:"dart",title:"Our User Model",snippet:o,section:"create-user-1"}),"\n",(0,a.jsxs)(n.p,{children:["Remember that our function built on ",(0,a.jsx)(n.code,{children:"Either"})," was capable of returning a reason\nas to why the user couldn't be created (e.g. no name provided, too young, etc.)."]}),"\n",(0,a.jsxs)(n.p,{children:["But consider the case where there are ",(0,a.jsx)(n.strong,{children:"multiple"})," issues with the input. In our\nprevious implementation, once an error is encountered, that error is returned\nand we can try again, only to run into yet another error. Frustrating to be\nsure!"]}),"\n",(0,a.jsxs)(n.p,{children:["In this case ",(0,a.jsx)(n.code,{children:"Validated"})," can help us by ",(0,a.jsx)(n.strong,{children:"accumuulating"})," all validation errors\nin case of a failure or returning the validated user. Let's take a quick look\nat what this could look like:"]}),"\n",(0,a.jsx)(r.z,{language:"dart",title:"Utilizing ValidatedNel",snippet:o,section:"create-user-2"}),"\n",(0,a.jsxs)(n.p,{children:["With this definition, we can validate all the individual pieces of our user\ndata and if everything looks good, get our user! If one or more of the pieces\ndoesn't pass the check, we'll get information about ",(0,a.jsx)(n.em,{children:(0,a.jsx)(n.strong,{children:"everything"})})," that needs\nfixed! Here's how it works in practice:"]}),"\n",(0,a.jsx)(r.z,{language:"dart",title:"Validated Output",snippet:o,section:"create-user-3"}),"\n",(0,a.jsx)(n.p,{children:"Once we run our user through the validation, we can decide what action(s) to\ntake. If the validation failed, we may show an error. If we succeed, maybe\nstore the user to a database."}),"\n",(0,a.jsx)(r.z,{language:"dart",title:"Reating to ValidateNel",snippet:o,section:"create-user-4"})]})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(u,{...e})}):u(e)}},2045(e,n,t){t.d(n,{z:()=>r});t(6540);var i=t(3457),a=t(4848);function s(e,n,t){if(null!=n){let t=`// ${n}`,a=e.indexOf(t);if(console.log(a),a>=0){for(;"\n"!=e[a];)a+=1;a+=1}let s=e.indexOf(t,a+1);if(0<=a){var i=(e=e.substring(a,s>=0?s:void 0).trimEnd()).split("\n");if(i.length>0){for(;0==i[0].length;)i.shift();let e=i[0].search(/\S|$/);return i.map(n=>"\n"==n?n:n.substring(e)).join("\n")}return e}return"// Oops! Snippet not found!"}return e}const r=({snippet:e,title:n,section:t,metastring:r})=>null==n||""==n?(0,a.jsx)(i.A,{metastring:r,children:s(e,t)}):(0,a.jsxs)("div",{className:"snippet",children:[(0,a.jsxs)("div",{className:"snippet__title_bar",children:[(0,a.jsxs)("div",{className:"snippet__dots",children:[(0,a.jsx)("div",{className:"snippet__dot"}),(0,a.jsx)("div",{className:"snippet__dot"}),(0,a.jsx)("div",{className:"snippet__dot"})]}),(0,a.jsx)("div",{className:"snippet__title",children:n})]}),(0,a.jsx)(i.A,{metastring:r,children:s(e,t)})]})}}]);