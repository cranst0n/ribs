"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[3268],{9189(e,n,s){s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>u,frontMatter:()=>l,metadata:()=>i,toc:()=>p});const i=JSON.parse('{"id":"json/parsing-json","title":"Parsing JSON","description":"If you\'ve ever used the built in Dart SDK jsonDecode function, you\'ll know","source":"@site/docs/json/parsing-json.mdx","sourceDirName":"json","slug":"/json/parsing-json","permalink":"/ribs/docs/json/parsing-json","draft":false,"unlisted":false,"editUrl":"https://github.com/cranst0n/ribs/edit/main/website/docs/json/parsing-json.mdx","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"JSON Streaming","permalink":"/ribs/docs/rill/json"},"next":{"title":"Creating JSON","permalink":"/ribs/docs/json/creating-json"}}');var t=s(4848),r=s(8453),a=s(2045);const o='// ignore_for_file: avoid_print\n\nimport \'package:ribs_core/ribs_core.dart\';\nimport \'package:ribs_json/ribs_json.dart\';\n\n// parsing-1\n\nfinal Either<ParsingFailure, Json> json = Json.parse(\n  \'[ null, 1, true, "hi!", { "distance": 3.14 } ]\',\n);\n\n// parsing-1\n\nvoid notifyUserOfError(ParsingFailure failure) => throw UnimplementedError();\nvoid proceedToUseValidJson(Json json) => throw UnimplementedError();\n\nvoid parseData() {\n  // parsing-2\n\n  json.fold(\n    (err) => notifyUserOfError(err),\n    (json) => proceedToUseValidJson(json),\n  );\n\n  // parsing-2\n}\n\n// parsing-3\nvoid printIt() {\n  print(json);\n  // Right(JArray([JNull, JNumber(1), JBoolean(true), JString("hi!"), JObject({ "distance": JNumber(3.14) })]))\n}\n\n// parsing-3\n\n// parsing-4\n\n// Removed the \',\' between 1 and true...\nfinal badJson = Json.parse(\'[ null, 1 true, "hi!", { "distance": 3.14 } ]\');\n\n// Left(ParsingFailure(ParseException: expected ] or , got \'true, ... (line 1, column 11) [index: 10, line: 1, col: 11]))\n\n// parsing-4\n',l={sidebar_position:1},d="Parsing JSON",c={},p=[];function h(e){const n={code:"code",em:"em",h1:"h1",header:"header",li:"li",p:"p",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"parsing-json",children:"Parsing JSON"})}),"\n",(0,t.jsxs)(n.p,{children:["If you've ever used the built in Dart SDK ",(0,t.jsx)(n.code,{children:"jsonDecode"})," function, you'll know\nthat your JSON (de)serialization code becomes littered with the dreaded\n",(0,t.jsx)(n.code,{children:"dynamic"})," type. Dynamic bring along with a lot of responsibility for the\ndeveloper to check what type of data exactly they're dealing with. Then you\nalso have to deal with the potential thrown exception, adding yet another\nresponsibility which could instead be encoded as a type."]}),"\n",(0,t.jsxs)(n.p,{children:["By contrast Ribs uses it's own parser (heavily derived from Scala's jawn),\nto build typed JSON data! No more type checks or casts using ",(0,t.jsx)(n.code,{children:"is"})," or ",(0,t.jsx)(n.code,{children:"as"}),"\nwhich pollute your code and reduce the readability."]}),"\n",(0,t.jsx)(n.p,{children:"Let's begin with a very simple example to get aquainted with the Ribs JSON\nAPI:"}),"\n",(0,t.jsx)(a.z,{language:"dart",title:"Simple Parse",snippet:o,section:"parsing-1"}),"\n",(0,t.jsxs)(n.p,{children:["You can see that we can simply pass a string to the ",(0,t.jsx)(n.code,{children:"Json.parse"})," function\nand get our ",(0,t.jsx)(n.strong,{children:"value"})," back (emphasis on value because an exception will\n",(0,t.jsx)(n.em,{children:"never"})," be raised!). With our value, it's easy to check if the parse succeeded\nor failed from the provided JSON string. The developer will need to explicitly\nhandle a failure because the ",(0,t.jsx)(n.code,{children:"Either"})," type dictates it!"]}),"\n",(0,t.jsx)(a.z,{language:"dart",title:"Handling Potentially Invalid JSON",snippet:o,section:"parsing-2"}),"\n",(0,t.jsxs)(n.p,{children:["Assuming that we've got a valid string to parse, as we do in this example,\nwhat exactly is the ",(0,t.jsx)(n.code,{children:"Json"})," type and what do we do with it? ",(0,t.jsx)(n.code,{children:"Json"})," is a sealed\nclass that can be one of a few possible types:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"JNull"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"JBoolean"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"JNumber"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"JString"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"JArray"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"JObject"})}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"These represent all the possible types of JSON as defined by the spec. To\nconfirm this, print out the result of parsing the string from above:"}),"\n",(0,t.jsx)(a.z,{language:"dart",title:"Typed JSON",snippet:o,section:"parsing-3"}),"\n",(0,t.jsx)(n.p,{children:"You can see that each element of the top-level array has successfully been\nparsed and has the proper type."}),"\n",(0,t.jsx)(n.p,{children:"Naturally if we feed an invalid JSON string into the parser, we'll get an\nerror. For illustrative purposes:"}),"\n",(0,t.jsx)(a.z,{language:"dart",title:"Typed JSON",snippet:o,section:"parsing-4"})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}},2045(e,n,s){s.d(n,{z:()=>a});s(6540);var i=s(3457),t=s(4848);function r(e,n,s){if(null!=n){let s=`// ${n}`,t=e.indexOf(s);if(console.log(t),t>=0){for(;"\n"!=e[t];)t+=1;t+=1}let r=e.indexOf(s,t+1);if(0<=t){var i=(e=e.substring(t,r>=0?r:void 0).trimEnd()).split("\n");if(i.length>0){for(;0==i[0].length;)i.shift();let e=i[0].search(/\S|$/);return i.map(n=>"\n"==n?n:n.substring(e)).join("\n")}return e}return"// Oops! Snippet not found!"}return e}const a=({snippet:e,title:n,section:s,metastring:a})=>null==n||""==n?(0,t.jsx)(i.A,{metastring:a,children:r(e,s)}):(0,t.jsxs)("div",{className:"snippet",children:[(0,t.jsxs)("div",{className:"snippet__title_bar",children:[(0,t.jsxs)("div",{className:"snippet__dots",children:[(0,t.jsx)("div",{className:"snippet__dot"}),(0,t.jsx)("div",{className:"snippet__dot"}),(0,t.jsx)("div",{className:"snippet__dot"})]}),(0,t.jsx)("div",{className:"snippet__title",children:n})]}),(0,t.jsx)(i.A,{metastring:a,children:r(e,s)})]})}}]);